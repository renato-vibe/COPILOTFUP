(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2700:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var s,a,l=r(5155),n=r(5239),i=r(2619),o=r.n(i),c=r(2115),d=r(5515);let u=null!=(a=null==(s=r(5704).env.NEXT_PUBLIC_CHATKIT_WORKFLOW_ID)?void 0:s.trim())?a:"wf_691498ab3cd08190b31a1ecadd223ed008ae1288861d6473",m=[{label:"Resum\xed el \xfaltimo follow-up",prompt:"Resume en bullets claros el \xfaltimo seguimiento y destaca acciones bloqueadas.",icon:"circle-question"},{label:"Prepara pr\xf3ximos pasos",prompt:"Con los hechos recopilados, arma pr\xf3ximos pasos priorizados y tiempos estimados.",icon:"circle-question"},{label:"Detecta riesgos",prompt:"Analiza los mensajes y enumera posibles riesgos o vac\xedos de informaci\xf3n para resolver.",icon:"circle-question"}];function p(e){let{error:t,fallbackMessage:r,onRetry:s,retryLabel:a}=e;if(!t&&!r)return null;let n=null!=t?t:r;return n?(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 z-10 flex h-full w-full flex-col justify-center rounded-[inherit] bg-white/85 p-6 text-center backdrop-blur dark:bg-slate-900/90",children:(0,l.jsxs)("div",{className:"pointer-events-auto mx-auto w-full max-w-md rounded-xl bg-white px-6 py-4 text-lg font-medium text-slate-700 dark:bg-transparent dark:text-slate-100",children:[(0,l.jsx)("div",{children:n}),t&&s?(0,l.jsx)("button",{type:"button",className:"mt-4 inline-flex items-center justify-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-none transition hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 focus-visible:ring-offset-2 dark:bg-slate-100 dark:text-slate-900 dark:hover:bg-slate-200",onClick:s,children:null!=a?a:"Restart chat"}):null]})}):null}let f=()=>({script:null,session:null,integration:null,retryable:!1});function h(e){var t,r;let{theme:s,onWidgetAction:a,onResponseEnd:n,onThemeRequest:i,className:o,onStatusChange:h}=e,x=(0,c.useRef)(new Set),[b,g]=(0,c.useState)(()=>f()),[w,v]=(0,c.useState)(!0),y=(0,c.useRef)(!0),[k,j]=(0,c.useState)(()=>{var e;return(null==(e=window.customElements)?void 0:e.get("openai-chatkit"))?"ready":"pending"}),[N,E]=(0,c.useState)(0),_=(0,c.useCallback)(e=>{g(t=>({...t,...e}))},[]);(0,c.useEffect)(()=>()=>{y.current=!1},[]),(0,c.useEffect)(()=>{var e;let t,r=()=>{y.current&&(j("ready"),_({script:null}))},s=e=>{var t;if(console.error("Failed to load chatkit.js for some reason",e),!y.current)return;j("error");let r=null!=(t=null==e?void 0:e.detail)?t:"unknown error";_({script:"Error: ".concat(r),retryable:!1}),v(!1)};return window.addEventListener("chatkit-script-loaded",r),window.addEventListener("chatkit-script-error",s),(null==(e=window.customElements)?void 0:e.get("openai-chatkit"))?r():"pending"===k&&(t=window.setTimeout(()=>{var e;(null==(e=window.customElements)?void 0:e.get("openai-chatkit"))||s(new CustomEvent("chatkit-script-error",{detail:"ChatKit web component is unavailable. Verify that the script URL is reachable."}))},5e3)),()=>{window.removeEventListener("chatkit-script-loaded",r),window.removeEventListener("chatkit-script-error",s),t&&window.clearTimeout(t)}},[k,_]);let C=!!(u&&!u.startsWith("wf_replace"));(0,c.useEffect)(()=>{!C&&y.current&&(_({session:"Set NEXT_PUBLIC_CHATKIT_WORKFLOW_ID in your .env.local file.",retryable:!1}),v(!1))},[C,_]);let S=(0,c.useCallback)(()=>{var e;x.current.clear(),j((null==(e=window.customElements)?void 0:e.get("openai-chatkit"))?"ready":"pending"),v(!0),g(f()),E(e=>e+1)},[]),L=(0,c.useCallback)(async e=>{if(!C){let e="Set NEXT_PUBLIC_CHATKIT_WORKFLOW_ID in your .env.local file.";throw y.current&&(_({session:e,retryable:!1}),v(!1)),Error(e)}y.current&&(e||v(!0),_({session:null,integration:null,retryable:!1}));try{let e=await fetch("/api/create-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflow:{id:u},chatkit_configuration:{file_upload:{enabled:!0}}})}),t=await e.text(),r={};if(t)try{r=JSON.parse(t)}catch(e){console.error("Failed to parse create-session response",e)}if(!e.ok){let t=function(e,t){if(!e)return t;let r=e.error;if("string"==typeof r)return r;if(r&&"object"==typeof r&&"message"in r&&"string"==typeof r.message)return r.message;let s=e.details;if("string"==typeof s)return s;if(s&&"object"==typeof s&&"error"in s){let e=s.error;if("string"==typeof e)return e;if(e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message)return e.message}return"string"==typeof e.message?e.message:t}(r,e.statusText);throw console.error("Create session request failed",{status:e.status,body:r}),Error(t)}let s=null==r?void 0:r.client_secret;if(!s)throw Error("Missing client secret in response");return y.current&&_({session:null,integration:null}),s}catch(t){console.error("Failed to create ChatKit session",t);let e=t instanceof Error?t.message:"Unable to start ChatKit session.";throw y.current&&_({session:e,retryable:!1}),t instanceof Error?t:Error(e)}finally{y.current&&!e&&v(!1)}},[C,_]),T=(0,d.W)({api:{getClientSecret:L},theme:{colorScheme:s,color:{grayscale:{hue:220,tint:6,shade:"dark"===s?-1:-4},accent:{primary:"dark"===s?"#67e8f9":"#0f172a",level:2}},radius:"pill"},startScreen:{greeting:"Hola, soy tu copiloto FollowUP. \xbfQu\xe9 quieres destrabar primero?",prompts:m},composer:{placeholder:"Escribe c\xf3mo puedo ayudarte con tu seguimiento...",attachments:{enabled:!0}},threadItemActions:{feedback:!1},onClientTool:async e=>{if("switch_theme"===e.name){let t=e.params.theme;return"light"===t||"dark"===t?(i(t),{success:!0}):{success:!1}}if("record_fact"===e.name){var t,r;let s=String(null!=(t=e.params.fact_id)?t:""),l=String(null!=(r=e.params.fact_text)?r:"");return!s||x.current.has(s)||(x.current.add(s),a({type:"save",factId:s,factText:l.replace(/\s+/g," ").trim()})),{success:!0}}return{success:!1}},onResponseEnd:()=>{n()},onResponseStart:()=>{_({integration:null,retryable:!1})},onThreadChange:()=>{x.current.clear()},onError:e=>{let{error:t}=e;console.error("ChatKit error",t)}}),I=null!=(t=b.session)?t:b.integration,K=null!=(r=b.script)?r:I,R=["relative flex h-full min-h-[520px] w-full flex-col overflow-hidden rounded-[28px] border border-slate-200/60 bg-white/95 p-2 text-slate-900 shadow-[0_25px_70px_rgba(15,23,42,0.35)] transition-colors dark:border-white/10 dark:bg-slate-900/70 dark:text-slate-100",null!=o?o:""].join(" ").trim();return(0,c.useEffect)(()=>{if(h){if(K)return void h(K);if(w||"pending"===k)return void h("Inicializando sesi\xf3n de ChatKit...");h("Chat listo ✅")}},[K,w,h,k]),(0,l.jsxs)("div",{className:R,children:[(0,l.jsx)(d.h,{control:T.control,className:K||w?"pointer-events-none opacity-0":"block h-full w-full"},N),(0,l.jsx)(p,{error:K,fallbackMessage:K||!w?null:"Loading assistant session...",onRetry:K&&b.retryable?S:null,retryLabel:"Restart chat"})]})}let x="chatkit-color-scheme";function b(){if("function"!=typeof window.matchMedia)return null;try{return window.matchMedia("(prefers-color-scheme: dark)")}catch(e){return null}}function g(){let e=b();return(null==e?void 0:e.matches)?"dark":"light"}function w(){return"light"}function v(e){let t=b();if(!t)return()=>{};let r=()=>e();return"function"==typeof t.addEventListener?(t.addEventListener("change",r),()=>t.removeEventListener("change",r)):"function"==typeof t.addListener?(t.addListener(r),()=>t.removeListener(r)):()=>{}}function y(){try{let e=window.localStorage.getItem(x);if("light"===e||"dark"===e)return e;return"system"===e?"system":null}catch(e){return null}}let k=[{label:"Context pack",value:"vs_6914c9aa"},{label:"Herramientas",value:"file • web • code"},{label:"Workflow",value:u||"Sin configurar"},{label:"Latencia media",value:"1.8 s"}],j=["Reescritura inteligente y clasificaci\xf3n de intenci\xf3n antes de responder","Escalada autom\xe1tica a b\xfasquedas en archivos, web o code interpreter","Experiencia en vidrio con foco mobile-first y controles accesibles"];function N(){let{scheme:e,setScheme:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system",t=(0,c.useSyncExternalStore)(v,g,w),[r,s]=(0,c.useState)(()=>{var t;return null!=(t=y())?t:e}),a=(0,c.useMemo)(()=>"system"===r?t:r,[r,t]);(0,c.useEffect)(()=>{try{"system"===r?window.localStorage.removeItem(x):window.localStorage.setItem(x,r)}catch(e){}},[r]),(0,c.useEffect)(()=>{!function(e){if("undefined"==typeof document)return;let t=document.documentElement;t.dataset.colorScheme=e,t.classList.toggle("dark","dark"===e),t.style.colorScheme=e}(a)},[a]),(0,c.useEffect)(()=>{let e=e=>{e.key===x&&s(e=>{let t=y();return null!=t?t:e})};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let l=(0,c.useCallback)(e=>{s(e)},[]);return{scheme:a,preference:r,setScheme:(0,c.useCallback)(e=>{s(e)},[]),setPreference:l,resetPreference:(0,c.useCallback)(()=>{s("system")},[])}}(),[r,s]=(0,c.useState)("Inicializando ChatKit…"),[a,i]=(0,c.useState)("Esperando interacci\xf3n"),d=(0,c.useCallback)(async e=>{i("Hecho guardado (".concat(e.factId.slice(0,6),"…)"))},[]),m=(0,c.useCallback)(()=>{let e=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});i("Respuesta generada \xb7 ".concat(e))},[]),p=(0,c.useCallback)(()=>{t("dark"===e?"light":"dark")},[e,t]),f=(0,c.useMemo)(()=>k.map(e=>"Workflow"===e.label?{...e,value:u||"wf_config"}:e),[]),b=(0,c.useMemo)(()=>/error/i.test(r)?{dot:"bg-rose-400",text:"text-rose-100",pill:"bg-rose-500/20 border border-rose-400/40"}:/inicializando/i.test(r)?{dot:"bg-amber-300",text:"text-amber-100",pill:"bg-amber-500/15 border border-amber-400/20"}:{dot:"bg-emerald-400",text:"text-emerald-50",pill:"bg-emerald-500/15 border border-emerald-400/20"},[r]);return(0,l.jsxs)("div",{className:"relative min-h-screen bg-slate-950 text-white",children:[(0,l.jsxs)("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_12%_20%,rgba(34,197,94,0.18),transparent_45%)]"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_0%,rgba(14,165,233,0.25),transparent_55%)]"})]}),(0,l.jsx)("header",{className:"sticky top-0 z-10 border-b border-white/5 bg-slate-950/70 px-4 py-4 backdrop-blur sm:px-6 lg:px-12",children:(0,l.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-wrap items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-white/95 p-2",children:(0,l.jsx)(n.default,{src:"/logo-fup.png",alt:"Logo FUP",width:64,height:40,className:"h-full w-full object-contain",priority:!0})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-white/70",children:"FollowUP"}),(0,l.jsx)("p",{className:"text-base font-semibold text-white",children:"Copilot \xb7 ChatKit + AgentKit"})]})]}),(0,l.jsxs)("div",{className:"flex flex-1 flex-wrap items-center justify-end gap-3 text-sm",children:[(0,l.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-white/80",children:["WF v","1",(0,l.jsx)("span",{className:"font-mono text-[11px] text-white/70",children:u||"wf_config"})]}),(0,l.jsxs)("button",{type:"button","aria-pressed":"dark"===e,onClick:p,className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/5 px-3 py-1.5 text-xs font-semibold text-white transition hover:border-white/40",children:[(0,l.jsx)("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:"dark"===e?"#38bdf8":"#fcd34d"}}),"dark"===e?"Modo oscuro":"Modo claro"]}),(0,l.jsx)(o(),{href:"https://github.com/openai/openai-chatkit-advanced-samples",target:"_blank",rel:"noreferrer",className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1.5 text-xs font-semibold text-white transition hover:border-white",children:"Docs avanzadas"})]})]})}),(0,l.jsx)("main",{className:"px-4 py-8 sm:px-6 lg:px-12",children:(0,l.jsx)("div",{className:"mx-auto max-w-6xl space-y-6",children:(0,l.jsxs)("section",{className:"rounded-[30px] border border-white/10 bg-white/5 p-6 backdrop-blur",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.5em] text-teal-200/80",children:"FollowUP copiloto"}),(0,l.jsx)("h1",{className:"mt-3 text-3xl font-semibold leading-tight text-white sm:text-4xl",children:"Tablero responsive para conversaciones de seguimiento impecables."}),(0,l.jsxs)("p",{className:"mt-3 text-base text-white/80",children:["Construido sobre ChatKit + AgentKit con el workflow",(0,l.jsx)("span",{className:"mx-2 inline-flex items-center rounded-full bg-white/10 px-2 py-0.5 font-mono text-xs text-emerald-200",children:u||"wf_config"}),"para reescritura, clasificaci\xf3n y ejecuci\xf3n de herramientas."]}),(0,l.jsx)("ul",{className:"mt-4 space-y-3 text-sm text-white/80",children:j.map(e=>(0,l.jsxs)("li",{className:"flex items-start gap-3",children:[(0,l.jsx)("span",{className:"mt-1 h-2 w-2 rounded-full bg-emerald-300"}),e]},e))}),(0,l.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3 text-sm",children:[(0,l.jsx)("a",{href:"#panel",className:"inline-flex items-center justify-center rounded-full bg-white px-5 py-2 text-sm font-semibold text-slate-900 transition hover:bg-slate-100",children:"Abrir panel"}),(0,l.jsx)(o(),{href:"https://platform.openai.com/docs/guides/chatkit",target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-full border border-white/40 px-5 py-2 text-sm font-semibold text-white/90 transition hover:border-white",children:"Gu\xeda ChatKit"})]})]}),(0,l.jsx)("div",{className:"grid flex-1 grid-cols-2 gap-3 text-sm text-white/90 sm:grid-cols-4 lg:grid-cols-2",children:f.map(e=>(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[(0,l.jsx)("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:e.label}),(0,l.jsx)("p",{className:"mt-2 text-lg font-semibold text-white",children:e.value})]},e.label))})]}),(0,l.jsxs)("div",{id:"panel",className:"mt-8 rounded-[28px] border border-white/10 bg-slate-950/40 p-4 backdrop-blur supports-[backdrop-filter]:bg-white/5",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[(0,l.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full px-3 py-1 font-semibold ".concat(b.pill," ").concat(b.text),children:[(0,l.jsx)("span",{className:"h-2.5 w-2.5 rounded-full ".concat(b.dot)}),r]}),(0,l.jsx)("span",{className:"text-white/60",children:a})]}),(0,l.jsx)("div",{className:"mt-4 grid gap-4 lg:grid-cols-[minmax(0,1fr)]",children:(0,l.jsx)("div",{className:"min-h-[520px] rounded-[24px] border border-white/10 bg-black/20 p-2",children:(0,l.jsx)(h,{theme:e,onWidgetAction:d,onResponseEnd:m,onThemeRequest:t,onStatusChange:s,className:"h-full"})})})]})]})})})]})}},6159:(e,t,r)=>{Promise.resolve().then(r.bind(r,2700))}},e=>{e.O(0,[843,441,255,358],()=>e(e.s=6159)),_N_E=e.O()}]);